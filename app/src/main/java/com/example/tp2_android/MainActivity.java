package com.example.tp2_android;import android.text.Editable;import android.text.TextWatcher;import android.view.View;import android.widget.*;import androidx.appcompat.app.AppCompatActivity;import android.os.Bundle;public class MainActivity extends AppCompatActivity {    Button envoyer = null;    Button reset = null;    EditText taille = null;    EditText poids = null;    CheckBox commentaire = null;    RadioGroup group = null;    TextView result = null;    private final String texteInit = "Cliquez sur le bouton « Calculer l'IMC » pour obtenir un résultat.";    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        envoyer = (Button) findViewById(R.id.calcul);        reset = (Button) findViewById(R.id.reset);        taille = (EditText) findViewById(R.id.taille);        poids = (EditText) findViewById(R.id.poids);        commentaire = (CheckBox) findViewById(R.id.commentaire);        group = (RadioGroup) findViewById(R.id.group);        result = (TextView) findViewById(R.id.result);        envoyer.setOnClickListener(envoyerListener);        reset.setOnClickListener(resetListener);        commentaire.setOnClickListener(checkedListener);        taille.addTextChangedListener(textWatcher);        poids.addTextChangedListener(textWatcher);    }    private View.OnClickListener envoyerListener = new View.OnClickListener() {        @Override        public void onClick(View v) {            //  on récupère la taille            String t = taille.getText().toString();            // On récupère le poids            String p = poids.getText().toString();            float tValue = Float.valueOf(t);            // Puis on vérifie que la taille est cohérente            if (tValue <= 0)                Toast.makeText(MainActivity.this, "La taille doit être positive", Toast.LENGTH_SHORT).show();            else {                float pValue = Float.valueOf(p);                if (pValue <= 0)                    Toast.makeText(MainActivity.this, "Le poids doit etre positif", Toast.LENGTH_SHORT).show();                else {                    // Si l'utilisateur a indiqué que la taille était en centimètres                    // On vérifie que la Checkbox sélectionnée est la deuxième à l'aide de son identifiant                    if (group.getCheckedRadioButtonId() == R.id.radio_centimetre) tValue = tValue / 100;                    float imc = pValue / (tValue * tValue);                    String resultat = "Votre IMC est " + imc + " . ";                    if (commentaire.isChecked()) resultat += interpreteIMC(imc);                    result.setText(resultat);                }            }        }    };    private View.OnClickListener resetListener = new View.OnClickListener() {        @Override        public void onClick(View v) {            poids.getText().clear();            taille.getText().clear();            result.setText(texteInit);        }    };    private View.OnClickListener checkedListener = new View.OnClickListener() {        @Override        public void onClick(View v) {            if (((CheckBox) v).isChecked()) {                result.setText(texteInit);            }        }    };    private TextWatcher textWatcher = new TextWatcher() {        @Override        public void onTextChanged(CharSequence s, int start, int before, int count) {            result.setText(texteInit);        }        @Override        public void beforeTextChanged(CharSequence s, int start, int count, int after) {            RadioButton radio_metre;            if (s.toString().contains(".") || s.toString().contains(",")) {                radio_metre = findViewById(R.id.radio_metre);                radio_metre.setChecked(true);            }        }        @Override        public void afterTextChanged(Editable s) {        }    };    private String interpreteIMC(float imc) {        String phrase = "";        if (imc < 16.5) {            phrase = "famine";        } else if (imc > 16.5 && imc < 18.5) {            phrase = "maigreur";        } else if (imc > 18.5 && imc < 25.0) {            phrase = "corpulence normale";        } else if (imc > 25.0 && imc < 30.0) {            phrase = "surpoids";        } else if (imc > 30.0 && imc < 35.0) {            phrase = "obésité modérée";        } else if (imc > 35.0 && imc < 40.0) {            phrase = "obésité sévère";        } else if (imc > 40) {            phrase = "obésité morbide ou massive";        }        return phrase;    }}